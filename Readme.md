# JavaScript 1 —É—Ä–æ–≤–µ–Ω—å –∑–∞–º–µ—Ç–∫–∏ –ø–æ —è–∑—ã–∫—É javascript –∏ –ø—Ä–æ–µ–∫—Ç—É –ö–æ–¥ –∏ –ú–∞–≥–∏—è

–ó–¥–µ—Å—å –∑–∞–º–µ—Ç–∫–∏ –ø–æ –æ—Å–Ω–æ–≤–∞–º —è–∑—ã–∫–∞ javascipt –∏ –ø—Ä–∏–º–µ—Ä—ã –Ω–∞ —É—á–µ–±–æ–º –¥–µ–º–æ-–ø—Ä–æ–µ–∫—Ç–µ –æ—Ç HTML Academy –¥–ª—è 29 –ø–æ—Ç–æ–∫–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–Ω–ª–∞–π–Ω‚Äë–∫—É—Ä—Å–∞ ¬´JavaScript. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤¬ª.

## 0. –ù–∞—á–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π , –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ SHH-–∫–ª—é—á–µ–π –∏ –ø—Ä.

–ü–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, —ç—Ç–æ –∏–∑—É—á–∞—Ç—å –∫–æ–º–º–∏—Ç—ã [–≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ GitHub –≤ master-–≤–µ—Ç–∫–µ –ø–æ—Ç–æ–∫–∞](https://github.com/htmlacademy/code-and-magic-demo).

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSH-–∫–ª—é—á–µ–π

–í–≤–æ–¥–∏–º `cd ~/.ssh`, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω—É–∂–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥.
–ò—Å–ø–æ–ª—å–∑—É–µ–º `ls`, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ. –ò—â–µ–º –ø–∞—Ä—É —Ñ–∞–π–ª–æ–≤ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≤–∏–¥–∞ –∏–º—è –∏ –∏–º—è.pub. –û–±—ã—á–Ω–æ –∏–º—è ‚Äî `id_rsa`, `id_dsa`, `id_ecdsa` –∏–ª–∏ `id_ed25519`. –§–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .pub ‚Äî –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á, –∞ –≤—Ç–æ—Ä–æ–π ‚Äî –≤–∞—à –ø—Ä–∏–≤–∞—Ç–Ω—ã–π, —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á.
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–∞—Ä—É –∫–ª—é—á–µ–π –∫–æ–º–∞–Ω–¥–æ–π:
```bash
ssh-keygen -t ed25519 -C your_mail@example.com
```

–ï—Å–ª–∏ —É –≤–∞—Å Linux, –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å –¥–ª—è `~/.ssh` –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫–æ–º–∞–Ω–¥–æ–π `chmod 700 ~/.ssh/`.
–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Å–æ–∑–¥–∞–Ω –∫–ª—é—á, –µ–≥–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ GitHub.

- –µ—Å–ª–∏ –≤—ã –Ω–∞ Windows ‚Äî `clip < ~/.ssh/id_ed25519.pub`;
- –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π macOS ‚Äî `pbcopy < ~/.ssh/id_ed25519.pub`;
- –Ω–∞ Linux –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sudo apt install xclip`, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç `xclip`, –∞ –∑–∞—Ç–µ–º –≤–≤–µ–¥–∏—Ç–µ `xclip ~/.ssh/id_ed25519.pub`. –ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `cat ~/.ssh/id_ed25519.pub`, –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä—è–º–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –æ—Ç—Ç—É–¥–∞.

–ú–æ–∂–Ω–æ –ø–æ–π—Ç–∏ –¥—Ä—É–≥–∏–º –ø—É—Ç—ë–º: –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `id_ed25519.pub` –ø—Ä—è–º–æ –≤ –ø–∞–ø–∫–µ –∏ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç—Ç—É–¥–∞.
–ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ GitHub –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ SSH –∏ GPG keys –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∫–ª—é—á.

–£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Å–≤—è–∑—å —Å GitHub —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –î–ª—è —ç—Ç–æ–≥–æ –≤–≤–µ–¥—ë–º –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
ssh -T git@github.com
```

–í –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–∏–º —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
```bash
The authenticity of host 'github.com (IP ADDRESS)' can't be established.
ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU.
Are you sure you want to continue connecting (yes/no)?
```
–°–æ–≥–ª–∞—à–∞–µ–º—Å—è, –Ω–∞–±—Ä–∞–≤ yes:
```bash
The authenticity of host 'github.com (IP ADDRESS)' can't be established.
ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU.
Are you sure you want to continue connecting (yes/no)? yes
```
–ù–∞ —ç—Ç–æ GitHub –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
```bash
Hi <–≤–∞—à –ª–æ–≥–∏–Ω –Ω–∞ GitHub>! You've successfully authenticated, but GitHub does not provide shell access.
```
–ö–æ–Ω–µ—Ü.



## 7. –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å DOM
### 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∫–∞–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω –¥–∞–Ω–Ω—ã–º–∏

```html
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <title>–ù—é–∞–Ω—Å—ã –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –¥–∞–Ω–Ω—ã–º–∏</title>
  <style>
    .emojis {
      display: inline-flex;
      margin: 0.5em 1em;
      padding: 0.1em 0.2em 0.25em;
      list-style: none;
      font-size: 2em;
      box-shadow: 0 1px 5px rgba(0,0,0,0.5);
      border-radius: 1em;
    }
  </style>
</head>

<body>
  <ul class="emojis">
    <li class="emoji emoji--smile">üôÇ</li>
    <li class="emoji emoji--neutral">üòê</li>
    <li class="emoji emoji--frowning">üôÅ</li>
    <li class="emoji emoji--angry">üò†</li>
    <li class="emoji emoji--crying">üò≠</li>
  </ul>

  <script src="script.js"></script>
</body>

</html>
```

### 1 –≤–∞—Ä–∏–∞–Ω—Ç
```js
const userEmotions = [
  'smile',
  'crying',
];

const emojiImage = {
  smile: 'üôÇ',
  neutral: 'üòê',
  frowning: 'üôÅ',
  angry: 'üò†',
  crying: 'üò≠',
};

const emojiContainer = document.querySelector('.emojis');

emojiContainer.innerHTML = '';

userEmotions.forEach((userEmotion) => {
  const emojiListItem = document.createElement('li');

  emojiListItem.classList.add('emoji');
  emojiListItem.classList.add('emoji--' + userEmotion);
  emojiListItem.textContent = emojiImage[userEmotion];

  emojiContainer.append(emojiListItem)
});
```
### 2 –≤–∞—Ä–∏–∞–Ω—Ç
```js
const userEmotions = [
  'smile',
  'crying',
];

const emojiContainer = document.querySelector('.emojis');
const emojiListFragment = document.createDocumentFragment();

userEmotions.forEach((userEmotion) => {
  const emojiListItem = emojiContainer.querySelector('.emoji--' + userEmotion);

  if (emojiListItem) {
    emojiListFragment.append(emojiListItem);
  }
});

emojiContainer.innerHTML = '';
emojiContainer.append(emojiListFragment);
```

### 3 –≤–∞—Ä–∏–∞–Ω—Ç
```js
const userEmotions = [
  'smile',
  'crying',
];

const emojiContainer = document.querySelector('.emojis');
const emojiList = emojiContainer.querySelectorAll('.emoji');

emojiList.forEach((emojiListItem) => {
  const isNecessary = userEmotions.some(
    (userEmotion) => emojiListItem.classList.contains('emoji--' + userEmotion),
  );

  if (!isNecessary) {
    emojiListItem.remove();
  }
});

# –∏–ª–∏ –±–µ–∑ some, —á–µ—Ä–µ–∑ modifiers

const userEmotions = [
  'smile',
  'crying',
];

const emojiContainer = document.querySelector('.emojis');
const emojiList = emojiContainer.querySelectorAll('.emoji');
const modifiers = userEmotions.map((userEmotion) => 'emoji--' + userEmotion);

emojiList.forEach((emojiListItem) => {
  const modifier = emojiListItem.classList[1]; // 1 - —ç—Ç–æ –∏–Ω–¥–µ–∫—Å –Ω—É–∂–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –≤ –∞—Ç—Ä–∏–±—É—Ç–µ class

  if (!modifiers.includes(modifier)) {
    emojiListItem.remove();
  }
});
```

## 9. –í–Ω–µ—à–Ω–∏–µ API –∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–î–ª—è —Ñ–æ—Ä–º—ã —É–∫–∞–∑—ã–≤–∞–µ–º `method`, `action`, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã, —Ç–æ `enctype="multipart/form-data"`, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö `autocomplete="off"`, –¥–ª—è –ø–æ–ª–µ–π `input` —É–∫–∞–∑—ã–≤–∞–µ–º `name="first_name"(–≤ –Ω–∏—Ö –ø—Ä–∏–¥—É—Ç –¥–∞–Ω–Ω—ã–µ), –∞—Ç—Ä–∏–±—É—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ `required`.
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å minlength="2" maxlength="25" –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∏–Ω –∏ –º–∞–∫—Å –¥–ª–∏–Ω–Ω—ã
```html
<form class="setup-wizard-form" method="post" enctype="multipart/form-data" action="https://32.javascript.htmlacademy.pro/code-and-magick" autocomplete="off">
  <label>
    <input type="text" class="setup-user-name" value="–°–∏–Ω–∏–π –ü–µ–Ω–¥–∞–ª—å—Ñ" name="username" required>
  </label>
</form>
```

### Pristine.js –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–¥—É –ø—Ä—è–º–æ –≤ —Ä–∞–∑–º–µ—Ç–∫–µ
–ß—Ç–æ–±—ã –æ–ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ JavaScript, –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `.addValidator()`.
–ú–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –ü–µ—Ä–≤—ã–π ‚Äî —ç–ª–µ–º–µ–Ω—Ç —Ñ–æ—Ä–º—ã, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ö–æ—Ç–∏–º –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å.
–í—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ .addValidator() –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ –º–µ—Å—Ç—É, –Ω–æ —É–¥–æ–±–Ω–µ–µ –æ–±—ä—è–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤—ã—à–µ –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ. –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å true –∏–ª–∏ false, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –≤–∞–ª–∏–¥–Ω–æ –ª–∏ –ø–æ–ª–µ. –¢—Ä–µ—Ç—å–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

```html
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <title>–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã —Å –ø–æ–º–æ—â—å—é PristineJS</title>
  <link rel="stylesheet" href="https://htmlacademy.github.io/console.js/latest/css/style.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <form class="form" autocomplete="off">
    <h3>–î–æ—Å—Ç–∞–≤–∫–∞ –ö–µ–∫—Å–æ–∫–æ—Ä–º–∞</h3>

    <p class="form__item">
      <label for="nickname">–ò–º—è –ø–∏—Ç–æ–º—Ü–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∫–∏:</label>
      <br>
      <input
        type="text"
        name="nickname"
        id="nickname"
        placeholder="–ö–µ–∫—Å–∏–∫"
      >
    </p>

    <p>
      –†–∞–∑–º–µ—Ä:
      <label><input type="radio" name="unit" value="s" checked>S</label>
      <label><input type="radio" name="unit" value="m">M</label>
    </p>

    <p class="form__item">
      <label for="amount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
      <br>
      <input
        type="number"
        name="amount"
        id="amount"
        placeholder="10"
      >
    </p>

    <p class="form__item">
      <select name="delivery">
        <option value="–î–æ—Å—Ç–∞–≤–∫–∞" selected>–î–æ—Å—Ç–∞–≤–∫–∞</option>
        <option value="–°–∞–º–æ–≤—ã–≤–æ–∑">–°–∞–º–æ–≤—ã–≤–æ–∑</option>
      </select>
      <select name="date">
        <option value="–°–µ–≥–æ–¥–Ω—è" selected>–°–µ–≥–æ–¥–Ω—è</option>
        <option value="–ó–∞–≤—Ç—Ä–∞">–ó–∞–≤—Ç—Ä–∞</option>
        <option value="–ù–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö">–ù–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö</option>
      </select>
    </p>

    <p>
      <button>–ó–∞–∫–∞–∑–∞—Ç—å</button>
    </p>
  </form>

  <script src="https://htmlacademy.github.io/console.js/latest/js/index-silent.js"></script>
  <script src="vendor/pristine.min.js"></script>
  <script src="script.js"></script>
</body>

</html>
```

```js
const orderForm = document.querySelector('.form');


const pristine = new Pristine(orderForm, {
  classTo: 'form__item', // –≠–ª–µ–º–µ–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∫–ª–∞—Å—Å—ã
  errorClass: 'form__item--invalid', // –ö–ª–∞—Å—Å, –æ–±–æ–∑–Ω–∞—á–∞—é—â–∏–π –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ –ø–æ–ª–µ
  successClass: 'form__item--valid', // –ö–ª–∞—Å—Å, –æ–±–æ–∑–Ω–∞—á–∞—é—â–∏–π –≤–∞–ª–∏–¥–Ω–æ–µ –ø–æ–ª–µ
  errorTextParent: 'form__item', // –≠–ª–µ–º–µ–Ω—Ç, –∫—É–¥–∞ –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è —Ç–µ–∫—Å—Ç —Å –æ—à–∏–±–∫–æ–π
  errorTextTag: 'span', // –¢–µ–≥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–º–ª—è—Ç—å —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
  errorTextClass: 'form__error' // –ö–ª–∞—Å—Å –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Å —Ç–µ–∫—Å—Ç–æ–º –æ—à–∏–±–∫–∏
});


orderForm.addEventListener('submit', (evt) => {
  evt.preventDefault();
  pristine.validate();
});

function validateNickname (value) {
  return value.length >= 2 && value.length <= 50;
}

pristine.addValidator(
  orderForm.querySelector('#nickname'),
  validateNickname,
  '–û—Ç 2 –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤'
);


const amountField = orderForm.querySelector('#amount');
const maxAmount = {
  's': 10,
  'm': 5
};

function validateAmount (value) {
  const unit = orderForm.querySelector('[name="unit"]:checked');
  return value.length && parseInt(value) <= maxAmount[unit.value];
}

function getAmountErrorMessage () {
  const unit = orderForm.querySelector('[name="unit"]:checked');
  return `–ù–µ –±–æ–ª—å—à–µ ${maxAmount[unit.value]} —à—Ç—É–∫ –≤ –æ–¥–Ω–∏ —Ä—É–∫–∏`;
}

pristine.addValidator(amountField, validateAmount, getAmountErrorMessage);

function onUnitChange () {
  amountField.placeholder = maxAmount[this.value];
  pristine.validate(amountField);
}

orderForm
  .querySelectorAll('[name="unit"]')
  .forEach((item) => item.addEventListener('change', onUnitChange));


const deliveryField = orderForm.querySelector('[name="delivery"]');
const dateField = orderForm.querySelector('[name="date"]');
const deliveryOption = {
  '–î–æ—Å—Ç–∞–≤–∫–∞': ['–ó–∞–≤—Ç—Ä–∞', '–ù–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö'],
  '–°–∞–º–æ–≤—ã–≤–æ–∑': ['–°–µ–≥–æ–¥–Ω—è', '–ó–∞–≤—Ç—Ä–∞']
};

function validateDelivery () {
  return deliveryOption[deliveryField.value].includes(dateField.value);
}

function getDeliveryErrorMessage () {
  return `
    ${deliveryField.value}
    ${dateField.value.toLowerCase()}
    ${deliveryField.value === '–î–æ—Å—Ç–∞–≤–∫–∞' ? '–Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞' : '–Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω'}
  `;
}

pristine.addValidator(deliveryField, validateDelivery, getDeliveryErrorMessage);
pristine.addValidator(dateField, validateDelivery, getDeliveryErrorMessage);


orderForm.addEventListener('submit', (evt) => {
  evt.preventDefault();
  pristine.validate();
});

```

## 11 –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å. –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é

## Promise –¶–µ–ø–æ—á–∫–∞ –ø—Ä–æ–º–∏—Å–æ–≤

–ü—Ä–æ–º–∏—Å ‚Äî —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç Promise. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ—ë —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –°–∞–º–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–∞–∫ –∏ –ø—Ä–µ–∂–¥–µ: –Ω–µ —Å—Ä–∞–∑—É, –∞ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å. –ü–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∏ —É—è—Å–Ω–∏—Ç—å, –ø—Ä–æ–º–∏—Å—ã ‚Äî —ç—Ç–æ –Ω–µ ¬´–º–∞–≥–∏—á–µ—Å–∫–∞—è¬ª –∑–∞–º–µ–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–∞–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ä–∞–∑—É. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –æ–±—ä–µ–∫—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∫–æ–¥–æ–º.

–ß—Ç–æ–±—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–æ–º–∏—Å–∞–º–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –æ–±—ä–µ–∫—Ç–∞ Promise —Å –ø–æ–º–æ—â—å—é new:

```js
const myPromise = new Promise((resolve, reject) => {});
```

–ê—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ new Promise() –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é. –ï—ë –ø—Ä–∏–Ω—è—Ç–æ –Ω–∞–∑—ã–≤–∞—Ç—å ¬´—Ñ—É–Ω–∫—Ü–∏—è-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å¬ª (–æ—Ç –∞–Ω–≥–ª. executor). –£ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞-–∫–æ–ª–±—ç–∫–∞:

- resolve ‚Äî –∫–æ–ª–±—ç–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ–º–∏—Å –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ;
- reject ‚Äî –∫–æ–ª–±—ç–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ–º–∏—Å –∑–∞–≤–µ—Ä—à—ë–Ω —Å –æ—à–∏–±–∫–æ–π.

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –º—ã –æ–±—ä—è–≤–ª—è–µ–º –ø—Ä–æ–º–∏—Å, –æ–Ω –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ pending, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:

```js
const myPromise = new Promise(() => {});
```

–ó–∞—Ç–µ–º, –∫–æ–≥–¥–∞ –∏ –µ—Å–ª–∏ –±—É–¥—É—Ç –≤—ã–∑–≤–∞–Ω—ã –∫–æ–ª–±—ç–∫–∏ resolve –∏–ª–∏ reject, –ø—Ä–æ–º–∏—Å –ø–µ—Ä–µ–π–¥—ë—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ settled, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω:

```js
const myPromise = new Promise((resolve, reject) => {
  if (2 > 1) {
    resolve();
  } else {
    reject();
  }
});
```

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –∫–æ–ª–±—ç–∫ resolve –∏–ª–∏ reject, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å fulfilled, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ, –∏–ª–∏ rejected, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω —Å –æ—à–∏–±–∫–æ–π.

–ò—Ç–æ–≥–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è 3 —Å–æ—Å—Ç–æ—è–Ω–∏—è (settled –Ω–µ —Å—á–∏—Ç–∞–µ–º –∑–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–µ):

- pending ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- settled ‚Äî –∑–∞–≤–µ—Ä—à—ë–Ω:
- fulfilled ‚Äî –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ
- rejected ‚Äî –∑–∞–≤–µ—Ä—à—ë–Ω —Å –æ—à–∏–±–∫–æ–π

```js
const myPromise = new Promise((resolve, reject) => {
  resolve(); // –ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–æ—á–∫–µ myPromise –±—É–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω
  reject(); // –ò –≤—ã–∑–æ–≤ reject —É–∂–µ –Ω–∏ –Ω–∞ —á—Ç–æ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç
});
```

## –¶–µ–ø–æ—á–∫–∞ –ø—Ä–æ–º–∏—Å–æ–≤

```js
const myPromise = new Promise((resolve, reject) => {});

// –ú–æ–∂–Ω–æ —Ç–∞–∫
myPromise.then(
  () => {}, // –°—Ç–∞–Ω–µ—Ç resolve
  () => {}, // –°—Ç–∞–Ω–µ—Ç reject
);

// –û–±—ã—á–Ω–æ –∏–¥–µ—Ç —Ü–µ–ø–æ—á–∫–∞ –ø—Ä–æ–º–∏—Å–æ–≤
myPromise.then(() => {}).then(() => {}).then(() => {}).catch(() => {});

// finally() –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–¥
myPromise
  .then(() => {
    console.log('–ü—Ä–æ–º–∏—Å –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ :-)');
-    console.log('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ');
  })
  .catch(() => {
    console.log('–ü—Ä–æ–º–∏—Å –∑–∞–≤–µ—Ä—à—ë–Ω —Å –æ—à–∏–±–∫–æ–π :-(');
-    console.log('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ');
  })
+  .finally(() => {
+    console.log('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ');
+  });

// –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–æ–º–∏—Å–∞ –≤ —Ü–µ–ø–æ—á–∫–µ
// –û–±—ä—è–≤–ª—è–µ–º –ø—Ä–æ–º–∏—Å sum –∏ —Å—Ä–∞–∑—É —É—Å–ø–µ—à–Ω–æ –µ–≥–æ –∑–∞–≤–µ—Ä—à–∞–µ–º —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º 1
const sum = new Promise((resolve) => resolve(1));

sum
  .then((result) => result + 1) // –ó–∞—Ç–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ø–∞–¥—ë—Ç –≤ then, –≥–¥–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –¥–∞–ª—å—à–µ
  .then((result) => result + 1) // –ò —Å–Ω–æ–≤–∞ +1
  .then((result) => console.log(result)); // –í –∏—Ç–æ–≥–µ: 1 + 1 + 1 = 3

```

## Fetch

–ù–∞—á–Ω—ë–º –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å fetch() —Å —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: –∞–¥—Ä–µ—Å —Ä–µ—Å—É—Ä—Å–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å, –∏ –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏. –í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –º–æ–∂–µ—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:

```js
// fetch(–∞–¥—Ä–µ—Å[, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏]);

fetch('https://jsonplaceholder.typicode.com/posts')
  .then((response) => response.json())
  .then((posts) => console.log(posts));

```

–≠—Ç–æ—Ç –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ GET-–∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Å–ø–∏—Å–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–π) –≤ JSON. –ü–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º fetch() –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –∞–¥—Ä–µ—Å —Ä–µ—Å—É—Ä—Å–∞. –í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–µ –∑–∞–¥–∞–ª–∏, —Ç–∞–∫ –∫–∞–∫ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è GET-–∑–∞–ø—Ä–æ—Å–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é fetch() –≤—ã–ø–æ–ª–Ω–∏—Ç –∏–º–µ–Ω–Ω–æ GET-–∑–∞–ø—Ä–æ—Å.

–†–∞–∑ fetch() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–∏—Å, –º—ã –ø–æ–ª—É—á–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞–∫–æ–º—ã–µ –º–µ—Ç–æ–¥—ã then, catch –∏ finally. –í —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–º–∏—Å–∞ –º—ã –ø–æ–ª—É—á–∏–º –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –æ–±—ä–µ–∫—Ç —Å –æ—Ç–≤–µ—Ç–æ–º. –°–∞–º–æ —Å–æ–±–æ–π –Ω–µ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –≤–∏–¥–µ, –∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º. –û–±—ä–µ–∫—Ç –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞, –Ω–æ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–ª—É–∂–µ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥–æ–ª–æ–≤–∫–∏, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–æ–º.

```js
// –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ –∏–∑–º–µ–Ω–∏–º —á–∞—Å—Ç—å –∞–¥—Ä–µ—Å–∞,
// –∑–∞–≤–µ–¥–æ–º–æ —É–∫–∞–∑–∞–≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞–¥—Ä–µ—Å /posts1
fetch('https://jsonplaceholder.typicode.com/posts1')
  .then((response) => {
    if (response.ok) {
      return response;
    }

    throw new Error(`${response.status} ‚Äî ${response.statusText}`);
  })
  .then((response) => response.json())
  .then((posts) => console.log(posts))
  .catch((error) => console.log(error));
```

## –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```js
// –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
const post = {
  userId: 31337,
  title: '–û–±–∑–æ—Ä –º–µ—Ç–æ–¥–∞ fetch',
  body: '–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–±–∑–æ—Ä–∞',
};

// –í—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø–µ—Ä–µ–¥–∞–¥–∏–º –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.
// –û–ø—Ä–µ–¥–µ–ª–∏–º –≤ –Ω—ë–º –º–µ—Ç–æ–¥, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
fetch(
  'https://jsonplaceholder.typicode.com/posts',
  {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(post),
  })
  .then((response) => response.json())
  .then((json) => console.log(json));
```

## XMLHttpRequest ‚Üí fetch

–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç, –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ open –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –∑–∞—Ç–µ–º –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ send, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å, –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è load.

```js
const xhr = new XMLHttpRequest();

xhr.addEventListener('load', () => {
  console.log(xhr.status, xhr.statusText);
});

xhr.open('GET', 'https://32.javascript.htmlacademy.pro/code-and-magick/data');

xhr.send();
```
## fetch

### –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
```js
fetch(
  'https://32.javascript.htmlacademy.pro/code-and-magick',
  {
    method: 'POST',
    credentials: 'same-origin',
    body: new FormData(),
  },
)
  .then((response) => {
    console.log(response.status);
    return response.json();
  })
  .then((data) => {
    console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç', data);
  });

```

### –ü–æ–ª—É—á–∏—Ç—å:
```main.js
import {createLoader} from './load.js';

const loadAnimals = createLoader(console.log, console.error);

loadAnimals();
```

```load.js
const createLoader = (onSuccess, onError) => () => fetch(
  'https://32.javascript.htmlacademy.pro/code-and-magick/data',
  {
    method: 'GET',
    credentials: 'same-origin',
  },
)
  .then((response) => {
    if (response.ok) {
      return response.json();
    }

    throw new Error(`${response.status} ${response.statusText}`);
  })
  .then((data) => {
    onSuccess(data);
  })
  .catch((err) => {
    onError(err);
  });

export {createLoader};
```

